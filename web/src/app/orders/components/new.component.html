<div tabindex="-1" class="modal fade modal_novo" id="new_order" role="dialog" aria-hidden="true" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg modal-primary" role="document">
        <div class="modal-content">
            <div class="modal-header novo">
                <h5 class="modal-title">Novo Pedido</h5>
                <button class="close" aria-label="Close" type="button" data-dismiss="modal" (click)="close()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body padding">
                <div class="col-md-12">
                    <form #myForm="ngForm" (keyup.enter)="buscar()" class="form-inline">
                        <div class="form-group col-md-12">
                            <label class="col-md-1">Buscar: </label>
                            <input type="text" class="form-control col-md-2" name="pesquisa" [(ngModel)]="pesquisa.value" placeholder="Digite produto" required minlength="2" autofocus="autofocus">
                            <label class="label qtd col-md-1"> Qtd.</label>
                            <input class="form-control col-md-1" type="number" min="1" max="10" name="qtd" [(ngModel)]="qtd" />
                            <label for="tipo" class="label col-md-1">Tipo: </label>
                            <select id="tipo" name="tipo" class="form-control col-md-2" [(ngModel)]="tipo">
                                <option value="0"> Delivery</option>
                                <option value="1"> Salão</option>
                                <option value="2"> Retirada</option>
                            </select>
                            <label class="label col-md-2">Mais sabor?</label>
                            <label class="switch switch-text switch-success">
                                <input type="checkbox" class="switch-input" name="cartao" checked>
                                <span class="switch-label" data-on="Sim" data-off="Não"></span>
                                <span class="switch-handle"></span>
                            </label>
                        </div>
                    </form>
                </div>

                <div class="col-md-12" style="padding-bottom: 5px; padding-top: 5px;">
                    <form #myForm="ngForm" class="form-inline">
                        <div class="form-group col-md-12">
                            <label class="col-md-1" *ngIf="tipo != 1">Telefone: </label>
                            <input ngxPhoneMask *ngIf="tipo != 1"  type="text" class="form-control col-md-3" name="pesquisa"  placeholder="Digite Cliente (Telefone, nome, codigo)" required minlength="11" [(ngModel)]="pesquisa.value2" (blur)="buscarCliente()">
                            <label for="mesa" class="label col-md-2" *ngIf="tipo == 1">Mesa: </label>
                            <select id="mesa" name="category_id" class="form-control col-md-4" [(ngModel)]="mesa_id" *ngIf="tipo == 1">
                                <option value="null">Selecione a mesa</option>
                                <option *ngFor="let g of mesas" value="{{ g.id }}"> {{ g.name }}</option>
                            </select>
                                <label class="label col-md-1" *ngIf="tipo != 1">Cartão?</label>
                                <label class="switch switch-text switch-success" *ngIf="tipo != 1">
                                    <input type="checkbox" class="switch-input" name="cartao" [(ngModel)]="cartao" checked>
                                    <span class="switch-label" data-on="Sim" data-off="Não"></span>
                                    <span class="switch-handle"></span>
                                </label>
                                <label for="troco" class="label col-md-1" *ngIf="tipo != 1 && cartao == false">Troco:</label>
                                <input *ngIf="tipo != 1 && cartao == false" type="text" name="troco" class="form-control col-md-2" id="troco" currencyMask [(ngModel)]="troco" [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"  placeholder="Troco para" style="margin-left: 10px">

                                <label for="bandeira" class="label col-md-2" *ngIf="cartao == true">Bandeira:</label>
                                <input *ngIf="cartao == true" type="text" id="bandeira" name="bandeira" [(ngModel)]="bandeira" class="form-control col-md-2" placeholder="Bandeira de cartão" style="margin-left: 10px">
                        </div>
                    </form>
                </div>
                <div class="row borderdiv">
                    <div class="col-md-6 mb-4 padding" style="height: 380px; overflow: auto" *ngIf="tipo != 1">
                        <!-- Nav tabs -->
                        <tabset>
                            <tab heading="Cliente">
                                <form class="form-inline">
                                    <input type="text" class="form-control col-md-12" name="name" [(ngModel)]="client.name" placeholder="Nome Cliente" [required]="true" minlength="8"/>
                                    <br><br>
                                    <input ngxPhoneMask type="text" class="form-control col-md-12" id="fone" name="phone" [(ngModel)]="client.phone" placeholder="Telefone"/>
                                    <br><br>
                                    <input type="text" class="form-control col-md-12 " name="email" [(ngModel)]="client.email" placeholder="Email">
                                    <br><br>
                                    <input type="text" class="form-control col-md-12" name="address.address" [(ngModel)]="client.address.address" placeholder="Rua"/>
                                    <br><br>
                                    <input type="text" class="form-control col-md-3" name="address.numero" [(ngModel)]="client.address.numero" placeholder="Numero">
                                    <div class="separate1"></div>
                                    <input type="text" class="form-control col-md-8" name="address.bairro" [(ngModel)]="client.address.bairro" placeholder="Bairro"/>
                                    <br><br>
                                    <select name="cidade" id="cidade" class="form-control col-md-12" [(ngModel)]="client.address.city_id">
                                        <option value="0">Selecione cidade</option>
                                        <option value="1">Guaxupé</option>
                                    </select>
                                    <br><br>
                                    <div class="padding" *ngIf="novo == true">
                                        <button type="button" class="btn btn-default btn-info" (click)="saveClient()">Cadastrar</button>
                                    </div>
                                </form>
                            </tab>
                            <tab heading="50 ultimos" *ngIf="novo == false">
                                <p>Pedido:</p>
                                <p>Data:</p>
                                <p>Produtos:</p>
                            </tab>
                        </tabset>
                    </div><!--/.col-->
                    <div class="col-lg-6 padding" [ngClass]="{'col-md-12 col-lg-12': tipo != 0 && tipo != 2, 'col-md-6 col-lg-6': tipo  != 1}">
                        <div class="table-responsive" style="height: 245px; overflow: auto">
                            <table class="table scrollbox table-striped">
                                <thead>
                                    <tr class="th-table title-table">
                                        <th class="text-center">#</th>
                                        <th>Produto</th>
                                        <th class="text-center">Valor</th>
                                        <th class="text-center">Qtd.</th>
                                        <th class="text-center">Subtotal</th>
                                        <th class="text-center"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="th-table" *ngFor="let p of items.items; let i = index">
                                        <td class="text-center">{{ p.id }}</td>
                                        <td>{{ p.name }}</td>
                                        <td class="text-center">{{ p.price | currency:'BRL':true }}</td>
                                        <td class="text-center">{{ p.qtd }}</td>
                                        <td class="text-center">{{ p.subtotal | currency:'BRL':true }}</td>
                                        <td class="text-center">
                                            <button class="btn btn-sm btn-default" (click)="removeItem(i)"><i class="fa fa-remove text-danger"></i></button>

                                            <button class="btn btn-sm btn-default" (click)="showComplement(i)"><i class="fa fa-plus text-info"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <hr>
                        <div class="col-md-12 text-center alert alert-success total-pagamento"><p class="qtd">TOTAL: {{ total | currency:'BRL':true }}</p></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer cadastro">
                 <div class="modal-button">
                    <button class="btn btn-info" (click)="save()"><i class="fa fa-save"></i> Salvar pedido (F9)</button>
                    <button class="btn btn-danger text-left" type="button" (click)="close()"><i class="fa fa-arrow-circle-left"></i> Cancelar</button>
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <div class="modal fade modal_novo" id="complement" role="dialog" aria-hidden="true" aria-labelledby="myModalLabell" style="z-index: 9999">
        <div class="modal-dialog modal-info" role="document">
            <div class="modal-content">
                <div class="modal-header novo">
                    <h5 class="modal-title">Complementos</h5>
                </div>
                <div class="modal-body padding">
                    <div class="col-md-9" *ngFor="let p of complements.data">
                        <div class="checkbox">
                            <label>
                                <p class="text-left"> {{ p.name }} - {{ p.price}}</p>
                            </label>
                            <button class="btn btn-default btn-sm" (click)="addComplement(p.id)"><i class="fa fa-plus"></i></button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer cadastro">
                    <div class="modal-button">
                        <button class="btn btn-info" (click)="saveComplement()"><i class="fa fa-save"></i> Salvar pedido (F9)</button>
                        <button class="btn btn-danger text-left" type="button" (click)="closeComplement()"><i class="fa fa-arrow-circle-left"></i> Cancelar</button>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>
    <!-- /.modal-dialog -->
</div>


